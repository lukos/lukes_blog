---
layout: post
title: Converting .Net Web Site to Web Application
date: '2019-02-12T09:12:00.002-08:00'
author: Luke Briner
tags:
- csharp
- ".net"
- vb
- c#
- visual studio
modified_time: '2019-04-01T03:03:56.050-07:00'
---

So you have a .Net website and want to convert it to a web application? Firstly, why might you want to do it?<br /><br /><ol><li>More strict compilation</li><li>Better reference handling - for example, it will pull in dependencies of dependencies automatically</li><li>More deployment options than just "xcopy"</li><li>More clever incremental build i.e. won't always build everything every time.</li></ol>Fortunately, the process is not too difficult, but there are some gotchas along the way. Assuming you are a fairly good developer, here are the steps in short format:<br /><br /><ol><li>&nbsp;Build and run the current website to ensure there is nothing fundamentally broken</li><li>Create a new empty web forms application of the correct language for the source web site (if you get this wrong, you will get some very weird compiler errors!).</li><li>Delete any files and folders that get created with it and prune any nuget or references that you don't want.</li><li>You can pre-emptively add any nuget and project references that you know you need or add them later when your compilation fails. You only need to add packages that are needed directly, it will automatically pull in dependencies of dependencies so don't just add everything that is currently in the old bin folder!</li><li>Copy the old App_Code folder into the new project, with its contents (which you can do in Solution Explorer) </li><li>Select all the code files and ensure their build action is set to "Compile", you can do this in one go with multi-select.</li><li>Click on the web application project and then select Project-&gt;Convert to web application in the Visual Studio menu. This will rename App_Code to Old_App_Code, which it is supposed to, so don't rename it back.</li><li>Perform your first build and fix any build errors. Depending on how loose your web site was written, there could be missing Import statements and problems with anything that is not defined correctly. Note, you can add global imports like Microsoft.VisualBasic into the project settings references section to avoid adding these into each page. Go sparingly though or you will have conflicts.</li><li>Copy the remaining content over and then select all of your ASPXs etc. and choose Project-&gt;Convert to web application again, which <i>should</i> add a designer file and correctly order the files with the code-behind and designer hidden away. I had to do a lot of this manually but it might be because I missed a step.</li><li>You will notice if a page does not have a designer file if you attempt to reference a page control from the code behind and it fails. Simply select the offending page and run Project-&gt;Convert to web application again.</li></ol><h3>Common Errors </h3>Common errors include:<br /><ul><li>Having the wrong build action on a file</li><li>Not having fully-qualified namespaces in the Inherits attribute of an aspx page</li><li>Having duplicate class names which would have been namespaced differently in the web site and might now conflict.&nbsp;</li><li>"Convert to web application" makes some changes to class names and namespaces, which might cause unexpected errors.</li><li>If your new project does not globally include namespaces that were included before, files might fail the build</li><li>If your new namespace is different, you might get unusual conflicts with types that worked before. Types in code files use relative namespace paths whereas Imports/using always use global (absolute) namespace paths. For example type A.B.ClassName referenced inside a class that is inside A.C either needs an Imports/using for A.B or a fully-qualified namespace of B.ClassName (note the missing A). This might have worked fine in the old namespace.&nbsp;</li><li>Any times you have used tools like Resharper while migrating might have made incorrect changes - for example pointed ASPX pages to the wrong code file.</li></ul>Note that like all Web Forms projects, the ASPX page errors will not fail the build by default so make sure you open each one and check for errors to be fixed before running your application.<ol></ol>