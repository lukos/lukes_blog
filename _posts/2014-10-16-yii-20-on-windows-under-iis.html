---
layout: post
title: Yii 2.0 on Windows under IIS
date: '2014-10-16T08:22:00.000-07:00'
author: Luke Briner
tags:
- Yii
- windows
- web application
- iis
- yii 2.0
modified_time: '2014-10-16T08:22:20.355-07:00'
---

It is possible to install and run Yii 2.0 on Windows. I did it today and learned some important lessons!<br /><br />Firstly, you need PHP 5.4 installed because Yii 2.0 uses some features of 5.4. In my case, I had 5.3 and 5.4 installed, 5.4 was already setup in IIS but the path pointed to 5.3 (just to confuse me!).<br /><br />You will need to use the console as well as IIS, so typing php -v in a console will confirm firstly whether PHP is visible in your path (it doesn't have to be, because you can call it with the full path) and secondly, what version it is.<br /><br />If you haven't set up PHP in IIS, you will need to do that before you can run the site. Mine uses FastCGI and php_cgi.exe from my php installation. Instructions for that are here: <a href="http://www.iis.net/learn/application-frameworks/install-and-configure-php-applications-on-iis/using-fastcgi-to-host-php-applications-on-iis" target="_blank">Installing PHP in IIS</a><br /><br />Yii recommends using Composer to install Yii 2.0 I already had that installed but if you don't, follow the instructions here: <a href="https://getcomposer.org/doc/00-intro.md#installation-windows" target="_blank">Installing Composer on Windows</a><br /><br />If you don't use Composer very often, run <b>\path\to\php composer.phar self-update</b> to make sure it is up to date.<br /><br />You can run the first command, <br /><pre class="instructions">php composer.phar global require "fxp/composer-asset-plugin:1.0.0-beta3", </pre>to require the Yii plugin, in any directory (I ran it from the composer directory because it was easiest). Before copying and pasting the code above, please check with the Yii site that this is the latest composer package.<br /><br />Now, you are ready to create your first Yii application.<br /><br />You run the command and point it to where you want your new app to live:<br /><pre class="instructions">php composer.phar create-project yiisoft/yii2-app-advanced <b>\path\to\app_name</b> 2.0.0</pre><div class="instructions"><span style="font-size: small;"><span style="font-family: inherit;">The part in bold is where you point to the new directory you want to create with your app in. When you run this, you will <span style="font-family: inherit;">probably be asked for a Github username and password - you will need to create an account if you don't have one. It says it is something to do with rate-limiting but I don't really understand why this is necessary.</span></span></span></div><div class="instructions"><br /></div><div class="instructions"><span style="font-size: small;"><span style="font-family: inherit;"><span style="font-family: inherit;">&nbsp;Before you can run the app, you need to do a couple of things. Firstly, as per readme.md in the root of your application, run the init script in the application root directory. There is a Windows batch file which might not work<span style="font-family: inherit;"> <span style="font-family: inherit;">correctly depending on whether your php.exe in the path is the correct version. If not, simpl<span style="font-family: inherit;">y run \path\to\php.exe init and it will work. This script will create some relevant configuration files.</span></span></span></span></span></span></div><div class="instructions"><br /></div><div class="instructions"><span style="font-size: small;"><span style="font-family: inherit;"><span style="font-family: inherit;"><span style="font-family: inherit;"><span style="font-family: inherit;"><span style="font-family: inherit;">Secondly, you then need to create and configure your database. Create a blank database and preferably a user who only has access to that database and grant them all privileges<span style="font-family: inherit;">. Edit \common\config\main-local.php and set the database connection details to match. Then, run yii in the same way as you ran init, ei<span style="font-family: inherit;">ther using the batch f<span style="font-family: inherit;">ile or using <b>\path\to\php.exe yii migrate</b>, which&nbsp;</span></span></span> </span></span></span></span>shou<span style="font-family: inherit;">ld find a single migration script which will be applied to the database.</span></span></span></div><div class="instructions"><br /></div><div class="instructions"><span style="font-size: small;"><span style="font-family: inherit;"><span style="font-family: inherit;">Create IIS sites for your frontend (and optional back-end), which point to \app<span style="font-family: inherit;">root\frontend\web and \approot\backend\web</span></span></span></span></div><div class="instructions"><br /></div><div class="instructions"><span style="font-size: small;"><span style="font-family: inherit;"><span style="font-family: inherit;"><span style="font-family: inherit;">&nbsp;Set the permissions on the entire app folder and children to allow access to the r<span style="font-family: inherit;">elevant App<span style="font-family: inherit;">lication Pool user for each of the sites. By default,<span style="font-family: inherit;"> IIS 7 creates an application pool per site and each application pool has a user created for it. To set permission<span style="font-family: inherit;">s, right-click the approot folder in Windows Explorer and choose Properties. Select the Security <span style="font-family: inherit;">tab and click the Edit button. In the security dialog, click Add and in the names text box, type <b>IIS AppPool\&lt;app pool name&gt;</b> and press OK, i<span style="font-family: inherit;">f you have it correct, the name will appear as &lt;app pool name&gt; in the security li<span style="font-family: inherit;">st and you can give it read &amp; execute access (usually the default).</span></span></span></span></span></span></span></span></span></span></span></div><div class="instructions"><br /></div><div class="instructions"><span style="font-size: small;"><span style="font-family: inherit;"><span style="font-family: inherit;"><span style="font-family: inherit;"><span style="font-family: inherit;"><span style="font-family: inherit;"><span style="font-family: inherit;"><span style="font-family: inherit;"><span style="font-family: inherit;"><span style="font-family: inherit;"><span style="font-family: inherit;">If you then visit your site, you should see the nice <span style="font-family: inherit;">vanilla Yii app<span style="font-family: inherit;">, looking all Bootstrappy and ready to modify.</span></span></span></span></span></span></span></span></span></span></span></span></span></div><div class="instructions"><br /></div><div class="instructions"><span style="font-size: small;"><span style="font-family: inherit;"><span style="font-family: inherit;"><span style="font-family: inherit;"><span style="font-family: inherit;"><span style="font-family: inherit;"><span style="font-family: inherit;"><span style="font-family: inherit;"><span style="font-family: inherit;"><span style="font-family: inherit;"><span style="font-family: inherit;"><span style="font-family: inherit;"><span style="font-family: inherit;">Enjoy. </span></span>&nbsp;</span></span></span></span></span></span></span></span> </span></span></span></div><div class="instructions"><br /></div><div class="instructions"><span style="font-size: small;"><span style="font-family: inherit;">&nbsp;</span></span></div>